{% extends "dashboard/base_dashboard.html" %}
{% load static %}

{% block title %}Factures - Walee{% endblock %}

{% block dashboard_content %}
<div x-data="facturesData()">
    
    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
        <div>
            <h1 class="text-3xl font-bold font-poppins text-walee-dark dark:text-white mb-2">
                Factures
            </h1>
            <p class="text-gray-600 dark:text-gray-400">G√©rez vos factures et devis</p>
        </div>
        <div class="flex space-x-3">
            <button @click="showNewFactureModal = true; factureType = 'devis'" 
                    class="flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 transform hover:scale-105 transition">
                <i data-lucide="file-text" class="w-5 h-5"></i>
                <span>Nouveau devis</span>
            </button>
            <button @click="showNewFactureModal = true; factureType = 'facture'" 
                    class="flex items-center space-x-2 px-6 py-3 bg-walee-green text-white font-semibold rounded-xl hover:bg-emerald-600 transform hover:scale-105 transition">
                <i data-lucide="file-plus" class="w-5 h-5"></i>
                <span>Nouvelle facture</span>
            </button>
        </div>
    </div>
    
    <!-- Filtre Entreprise -->
    <div class="bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 shadow-sm">
        <div class="flex items-center space-x-4">
            <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Entreprise:</label>
            <select x-model="selectedEntreprise" 
                    @change="loadFactures()"
                    class="px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-walee-blue outline-none">
                <option value="">üìä Toutes les entreprises</option>
                <option value="1">üè¢ ACME Corporation</option>
                <option value="2">üíª Tech Boutique</option>
                <option value="3">üçΩÔ∏è Restaurant Saveurs</option>
            </select>
        </div>
    </div>
    
    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        
        <!-- Total Factures -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
            <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-xl flex items-center justify-center">
                    <i data-lucide="file-text" class="w-6 h-6 text-walee-blue"></i>
                </div>
                <span class="text-green-500 text-sm font-medium">+18</span>
            </div>
            <h3 class="text-gray-500 dark:text-gray-400 text-sm mb-1">Total Factures</h3>
            <p class="text-3xl font-bold font-poppins text-walee-dark dark:text-white" x-text="stats.totalFactures"></p>
            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Ce mois</p>
        </div>
        
        <!-- Montant Total -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
            <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-xl flex items-center justify-center">
                    <i data-lucide="dollar-sign" class="w-6 h-6 text-walee-green"></i>
                </div>
                <span class="text-green-500 text-sm font-medium">+12.3%</span>
            </div>
            <h3 class="text-gray-500 dark:text-gray-400 text-sm mb-1">Montant Total</h3>
            <p class="text-3xl font-bold font-poppins text-walee-dark dark:text-white" x-text="formatMoney(stats.montantTotal)"></p>
            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">FCFA</p>
        </div>
        
        <!-- Factures Pay√©es -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
            <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-xl flex items-center justify-center">
                    <i data-lucide="check-circle" class="w-6 h-6 text-purple-600 dark:text-purple-400"></i>
                </div>
                <span class="text-green-500 text-sm font-medium">85%</span>
            </div>
            <h3 class="text-gray-500 dark:text-gray-400 text-sm mb-1">Factures Pay√©es</h3>
            <p class="text-3xl font-bold font-poppins text-walee-dark dark:text-white" x-text="stats.facturesPayees"></p>
            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1" x-text="formatMoney(stats.montantPaye)"></p>
        </div>
        
        <!-- En Attente -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
            <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 bg-orange-100 dark:bg-orange-900 rounded-xl flex items-center justify-center">
                    <i data-lucide="clock" class="w-6 h-6 text-orange-600 dark:text-orange-400"></i>
                </div>
                <span class="text-orange-500 text-sm font-medium">15%</span>
            </div>
            <h3 class="text-gray-500 dark:text-gray-400 text-sm mb-1">En Attente</h3>
            <p class="text-3xl font-bold font-poppins text-walee-dark dark:text-white" x-text="stats.facturesAttente"></p>
            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1" x-text="formatMoney(stats.montantAttente)"></p>
        </div>
        
    </div>
    
    <!-- Filtres -->
    <div class="bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 shadow-sm">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
            <div class="flex-1 max-w-md">
                <div class="relative">
                    <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                    <input type="text" 
                           x-model="searchQuery"
                           placeholder="Rechercher une facture..." 
                           class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-walee-blue focus:border-transparent outline-none">
                </div>
            </div>
            
            <div class="flex space-x-3">
                <select x-model="selectedType"
                        class="px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-walee-blue outline-none">
                    <option value="">Tous les types</option>
                    <option value="facture">Factures</option>
                    <option value="devis">Devis</option>
                </select>
                
                <select x-model="selectedStatus"
                        class="px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-walee-blue outline-none">
                    <option value="">Tous les statuts</option>
                    <option value="payee">Pay√©e</option>
                    <option value="attente">En attente</option>
                    <option value="retard">En retard</option>
                    <option value="annulee">Annul√©e</option>
                </select>
                
                <select x-model="selectedPeriod"
                        class="px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-walee-blue outline-none">
                    <option value="month">Ce mois</option>
                    <option value="quarter">Ce trimestre</option>
                    <option value="year">Cette ann√©e</option>
                </select>
                
                <button class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition">
                    <i data-lucide="download" class="w-5 h-5"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Factures Table -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
        <table class="w-full">
            <thead class="bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600">
                <tr>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">N¬∞ Facture</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase" x-show="!selectedEntreprise">Entreprise</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Client</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Type</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Montant</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">√âch√©ance</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Statut</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Actions</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                
                <template x-for="facture in filteredFactures" :key="facture.id">
                    <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition">
                        <td class="px-6 py-4">
                            <div>
                                <p class="font-medium text-gray-900 dark:text-white" x-text="facture.numero"></p>
                                <p class="text-xs text-gray-500 dark:text-gray-400" x-text="facture.date"></p>
                            </div>
                        </td>
                        <td class="px-6 py-4" x-show="!selectedEntreprise">
                            <span class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300">
                                <i data-lucide="building-2" class="w-3 h-3 mr-1"></i>
                                <span x-text="facture.entreprise"></span>
                            </span>
                        </td>
                        <td class="px-6 py-4">
                            <p class="text-sm font-medium text-gray-900 dark:text-white" x-text="facture.client"></p>
                            <p class="text-xs text-gray-500 dark:text-gray-400" x-text="facture.clientEmail"></p>
                        </td>
                        <td class="px-6 py-4">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium"
                                  :class="facture.type === 'facture' ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'">
                                <i :data-lucide="facture.type === 'facture' ? 'file-text' : 'file-edit'" class="w-3 h-3 mr-1"></i>
                                <span x-text="facture.type === 'facture' ? 'Facture' : 'Devis'"></span>
                            </span>
                        </td>
                        <td class="px-6 py-4">
                            <p class="font-semibold text-gray-900 dark:text-white" x-text="formatMoney(facture.montant)"></p>
                        </td>
                        <td class="px-6 py-4">
                            <p class="text-sm text-gray-900 dark:text-white" x-text="facture.echeance"></p>
                            <p class="text-xs" :class="isOverdue(facture.echeance) ? 'text-red-500' : 'text-gray-400 dark:text-gray-500'" 
                               x-text="getDelaiText(facture.echeance)"></p>
                        </td>
                        <td class="px-6 py-4">
                            <span class="inline-flex px-3 py-1 rounded-full text-xs font-medium"
                                  :class="getStatutClass(facture.statut)">
                                <span x-text="getStatutText(facture.statut)"></span>
                            </span>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex space-x-2">
                                <button @click="viewFacture(facture)" 
                                        class="p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition"
                                        title="Voir">
                                    <i data-lucide="eye" class="w-4 h-4 text-blue-600 dark:text-blue-400"></i>
                                </button>
                                <button @click="downloadFacture(facture)" 
                                        class="p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition"
                                        title="T√©l√©charger PDF">
                                    <i data-lucide="download" class="w-4 h-4 text-gray-600 dark:text-gray-400"></i>
                                </button>
                                <button @click="sendFacture(facture)" 
                                        class="p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition"
                                        title="Envoyer par email">
                                    <i data-lucide="send" class="w-4 h-4 text-green-600 dark:text-green-400"></i>
                                </button>
                                <button x-show="facture.statut === 'attente'" 
                                        @click="markAsPaid(facture)" 
                                        class="p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition"
                                        title="Marquer comme pay√©e">
                                    <i data-lucide="check" class="w-4 h-4 text-purple-600 dark:text-purple-400"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </template>
                
            </tbody>
        </table>
    </div>
    
    <!-- View Facture Modal -->
    <div x-show="showViewModal" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"
         @click.self="showViewModal = false">
        
        <div x-show="showViewModal"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 scale-90"
             x-transition:enter-end="opacity-100 scale-100"
             class="bg-white dark:bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            
            <template x-if="viewingFacture">
                <div>
                    <!-- Modal Header -->
                    <div class="sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-2xl font-bold font-poppins text-walee-dark dark:text-white" x-text="viewingFacture.numero"></h2>
                                <p class="text-gray-600 dark:text-gray-400" x-text="viewingFacture.type === 'facture' ? 'Facture' : 'Devis'"></p>
                            </div>
                            <button @click="showViewModal = false" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg">
                                <i data-lucide="x" class="w-6 h-6 text-gray-600 dark:text-gray-300"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Modal Body - Facture Preview -->
                    <div class="p-8 bg-gray-50 dark:bg-gray-900">
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-8 shadow-lg">
                            
                            <!-- En-t√™te Facture -->
                            <div class="flex justify-between mb-8">
                                <div>
                                    <h3 class="text-2xl font-bold text-walee-blue mb-2" x-text="viewingFacture.entreprise"></h3>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">123 Avenue de la R√©publique</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Abidjan, C√¥te d'Ivoire</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">contact@entreprise.com</p>
                                </div>
                                <div class="text-right">
                                    <h4 class="text-3xl font-bold text-walee-dark dark:text-white mb-2" x-text="viewingFacture.type === 'facture' ? 'FACTURE' : 'DEVIS'"></h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-400" x-text="'N¬∞ ' + viewingFacture.numero"></p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400" x-text="'Date: ' + viewingFacture.date"></p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400" x-text="'√âch√©ance: ' + viewingFacture.echeance"></p>
                                </div>
                            </div>
                            
                            <!-- Client Info -->
                            <div class="mb-8 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <h5 class="font-bold text-gray-900 dark:text-white mb-2">Factur√© √†:</h5>
                                <p class="text-gray-700 dark:text-gray-300" x-text="viewingFacture.client"></p>
                                <p class="text-sm text-gray-600 dark:text-gray-400" x-text="viewingFacture.clientEmail"></p>
                            </div>
                            
                            <!-- Items Table -->
                            <table class="w-full mb-8">
                                <thead class="border-b-2 border-gray-300 dark:border-gray-600">
                                    <tr>
                                        <th class="text-left py-3 text-gray-700 dark:text-gray-300">Description</th>
                                        <th class="text-center py-3 text-gray-700 dark:text-gray-300">Qt√©</th>
                                        <th class="text-right py-3 text-gray-700 dark:text-gray-300">Prix Unit.</th>
                                        <th class="text-right py-3 text-gray-700 dark:text-gray-300">Total</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                    <tr>
                                        <td class="py-3 text-gray-900 dark:text-white">Laptop HP Pavilion</td>
                                        <td class="text-center py-3 text-gray-700 dark:text-gray-300">2</td>
                                        <td class="text-right py-3 text-gray-700 dark:text-gray-300">450,000</td>
                                        <td class="text-right py-3 font-semibold text-gray-900 dark:text-white">900,000</td>
                                    </tr>
                                    <tr>
                                        <td class="py-3 text-gray-900 dark:text-white">Support technique</td>
                                        <td class="text-center py-3 text-gray-700 dark:text-gray-300">1</td>
                                        <td class="text-right py-3 text-gray-700 dark:text-gray-300">50,000</td>
                                        <td class="text-right py-3 font-semibold text-gray-900 dark:text-white">50,000</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <!-- Totaux -->
                            <div class="flex justify-end mb-8">
                                <div class="w-64">
                                    <div class="flex justify-between py-2 text-gray-700 dark:text-gray-300">
                                        <span>Sous-total:</span>
                                        <span>950,000 FCFA</span>
                                    </div>
                                    <div class="flex justify-between py-2 text-gray-700 dark:text-gray-300">
                                        <span>TVA (18%):</span>
                                        <span>171,000 FCFA</span>
                                    </div>
                                    <div class="flex justify-between py-3 border-t-2 border-gray-300 dark:border-gray-600 font-bold text-lg text-walee-dark dark:text-white">
                                        <span>Total:</span>
                                        <span x-text="formatMoney(viewingFacture.montant)"></span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Notes -->
                            <div class="border-t pt-6">
                                <h5 class="font-bold text-gray-900 dark:text-white mb-2">Notes:</h5>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Merci pour votre confiance. Paiement √† effectuer dans les 30 jours.</p>
                            </div>
                            
                        </div>
                    </div>
                    
                    <!-- Actions -->
                    <div class="sticky bottom-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-6 py-4">
                        <div class="flex space-x-3">
                            <button @click="downloadFacture(viewingFacture)" 
                                    class="flex-1 px-6 py-3 bg-walee-blue text-white font-semibold rounded-xl hover:bg-blue-700 transition">
                                <i data-lucide="download" class="w-5 h-5 inline mr-2"></i>
                                T√©l√©charger PDF
                            </button>
                            <button @click="sendFacture(viewingFacture)" 
                                    class="flex-1 px-6 py-3 bg-walee-green text-white font-semibold rounded-xl hover:bg-emerald-600 transition">
                                <i data-lucide="send" class="w-5 h-5 inline mr-2"></i>
                                Envoyer par Email
                            </button>
                        </div>
                    </div>
                </div>
            </template>
            
        </div>
    </div>
    
</div>
{% endblock %}

{% block extra_js %}
<script>
function facturesData() {
    return {
        showNewFactureModal: false,
        showViewModal: false,
        viewingFacture: null,
        factureType: 'facture',
        selectedEntreprise: '',
        searchQuery: '',
        selectedType: '',
        selectedStatus: '',
        selectedPeriod: 'month',
        
        stats: {
            totalFactures: 156,
            montantTotal: 12500000,
            facturesPayees: 132,
            montantPaye: 10625000,
            facturesAttente: 24,
            montantAttente: 1875000
        },
        
        factures: [
            { id: 1, numero: 'FAC-2024-001', date: '15/01/2024', entreprise: 'ACME Corporation', entrepriseId: 1, client: 'Jean Kouassi', clientEmail: 'jean@email.com', type: 'facture', montant: 1121000, echeance: '15/02/2024', statut: 'payee' },
            { id: 2, numero: 'FAC-2024-002', date: '16/01/2024', entreprise: 'Tech Boutique', entrepriseId: 2, client: 'Marie Diallo', clientEmail: 'marie@email.com', type: 'facture', montant: 850000, echeance: '16/02/2024', statut: 'attente' },
            { id: 3, numero: 'DEV-2024-001', date: '17/01/2024', entreprise: 'ACME Corporation', entrepriseId: 1, client: 'Yao Brou', clientEmail: 'yao@email.com', type: 'devis', montant: 450000, echeance: '17/02/2024', statut: 'attente' },
            { id: 4, numero: 'FAC-2024-003', date: '10/01/2024', entreprise: 'Restaurant Saveurs', entrepriseId: 3, client: 'Aya Kon√©', clientEmail: 'aya@email.com', type: 'facture', montant: 325000, echeance: '10/01/2024', statut: 'retard' },
        ],
        
        get filteredFactures() {
            return this.factures.filter(facture => {
                const matchSearch = !this.searchQuery || 
                    facture.numero.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                    facture.client.toLowerCase().includes(this.searchQuery.toLowerCase());
                
                const matchEntreprise = !this.selectedEntreprise || 
                    facture.entrepriseId == this.selectedEntreprise;
                
                const matchType = !this.selectedType || 
                    facture.type === this.selectedType;
                
                const matchStatus = !this.selectedStatus || 
                    facture.statut === this.selectedStatus;
                
                return matchSearch && matchEntreprise && matchType && matchStatus;
            });
        },
        
        loadFactures() {
            console.log('Chargement factures pour entreprise:', this.selectedEntreprise);
        },
        
        formatMoney(amount) {
            return new Intl.NumberFormat('fr-FR').format(amount) + ' FCFA';
        },
        
        isOverdue(echeance) {
            const today = new Date();
            const dueDate = new Date(echeance.split('/').reverse().join('-'));
            return dueDate < today;
        },
        
        getDelaiText(echeance) {
            const today = new Date();
            const dueDate = new Date(echeance.split('/').reverse().join('-'));
            const diffTime = dueDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 0) return `En retard de ${Math.abs(diffDays)} jours`;
            if (diffDays === 0) return '√âch√©ance aujourd\'hui';
            if (diffDays <= 7) return `${diffDays} jours restants`;
            return `${diffDays} jours`;
        },
        
        getStatutClass(statut) {
            const classes = {
                'payee': 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300',
                'attente': 'bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300',
                'retard': 'bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300',
                'annulee': 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300'
            };
            return classes[statut] || 'bg-gray-100 text-gray-700';
        },
        
        getStatutText(statut) {
            const texts = {
                'payee': 'Pay√©e',
                'attente': 'En attente',
                'retard': 'En retard',
                'annulee': 'Annul√©e'
            };
            return texts[statut] || statut;
        },
        
        viewFacture(facture) {
            this.viewingFacture = facture;
            this.showViewModal = true;
        },
        
        downloadFacture(facture) {
            alert(`üì• T√©l√©chargement de ${facture.numero}.pdf\n\nFonctionnalit√© √† venir`);
        },
        
        sendFacture(facture) {
            alert(`üìß Envoi de ${facture.numero} √† ${facture.clientEmail}\n\nFonctionnalit√© √† venir`);
        },
        
        markAsPaid(facture) {
            if (confirm(`‚úÖ Marquer ${facture.numero} comme pay√©e ?`)) {
                facture.statut = 'payee';
                alert(`‚úÖ Facture marqu√©e comme pay√©e`);
            }
        }
    }
}
</script>
{% endblock %}
