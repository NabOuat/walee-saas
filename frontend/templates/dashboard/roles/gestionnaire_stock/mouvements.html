{% extends "dashboard/roles/gestionnaire_stock/base_gestionnaire.html" %}
{% load static %}
{% block title %}Mouvements Stock - Walee{% endblock %}
{% block dashboard_content %}
<div x-data="{mouvements:[{id:1,type:'Entrée',produit:'Laptop Dell',qte:10,date:'20/10/2025 14:30',user:'Admin'},{id:2,type:'Sortie',produit:'iPhone 13',qte:5,date:'20/10/2025 11:20',user:'Vendeur1'},{id:3,type:'Ajustement',produit:'Samsung S21',qte:3,date:'19/10/2025 16:45',user:'Admin'}],searchQuery:'',filterType:''}" x-init="lucide.createIcons()">
<div class="flex items-center justify-between mb-6">
<div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">Mouvements de Stock</h1><p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Historique complet des mouvements</p></div>
<button @click.prevent="window.open('/api/export/mouvements', '_blank')" class="px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition flex items-center gap-2"><i data-lucide="download" class="w-4 h-4"></i><span>Exporter</span></button>
</div>
<div class="grid grid-cols-3 gap-4 mb-6">
<div class="bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4 border border-green-200"><div class="flex items-center justify-between mb-2"><div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center"><i data-lucide="arrow-down-left" class="w-5 h-5 text-white"></i></div></div><p class="text-2xl font-bold text-green-900 dark:text-green-100" x-text="mouvements.filter(m=>m.type==='Entrée').length"></p><p class="text-xs text-green-600 font-medium">Entrées</p></div>
<div class="bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-lg p-4 border border-red-200"><div class="flex items-center justify-between mb-2"><div class="w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center"><i data-lucide="arrow-up-right" class="w-5 h-5 text-white"></i></div></div><p class="text-2xl font-bold text-red-900 dark:text-red-100" x-text="mouvements.filter(m=>m.type==='Sortie').length"></p><p class="text-xs text-red-600 font-medium">Sorties</p></div>
<div class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200"><div class="flex items-center justify-between mb-2"><div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center"><i data-lucide="edit-3" class="w-5 h-5 text-white"></i></div></div><p class="text-2xl font-bold text-blue-900 dark:text-blue-100" x-text="mouvements.filter(m=>m.type==='Ajustement').length"></p><p class="text-xs text-blue-600 font-medium">Ajustements</p></div>
</div>
<div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700">
<div class="p-4 border-b border-gray-200 dark:border-gray-700"><div class="flex gap-3"><div class="flex-1 relative"><i data-lucide="search" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i><input type="text" x-model="searchQuery" placeholder="Rechercher..." class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg text-sm"></div><select x-model="filterType" class="px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg text-sm"><option value="">Tous types</option><option value="Entrée">Entrée</option><option value="Sortie">Sortie</option><option value="Ajustement">Ajustement</option></select></div></div>
<div class="overflow-x-auto"><table class="w-full"><thead class="bg-gray-50 dark:bg-gray-900"><tr><th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Date</th><th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Type</th><th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Produit</th><th class="px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase">Quantité</th><th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Utilisateur</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"><template x-for="mvt in mouvements" :key="mvt.id"><tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50"><td class="px-4 py-3 text-sm text-gray-700 dark:text-gray-300" x-text="mvt.date"></td><td class="px-4 py-3"><span class="inline-flex px-2.5 py-1 rounded-full text-xs font-semibold" :class="mvt.type==='Entrée'?'bg-green-100 text-green-700':mvt.type==='Sortie'?'bg-red-100 text-red-700':'bg-blue-100 text-blue-700'" x-text="mvt.type"></span></td><td class="px-4 py-3 text-sm font-medium text-gray-900 dark:text-white" x-text="mvt.produit"></td><td class="px-4 py-3 text-right text-sm font-bold" :class="mvt.type==='Entrée'?'text-green-600':'text-red-600'" x-text="(mvt.type==='Entrée'?'+':'-')+mvt.qte"></td><td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400" x-text="mvt.user"></td></tr></template></tbody></table></div>
</div>
</div>
{% endblock %}
